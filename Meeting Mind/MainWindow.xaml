<Window x:Class="MeetingMind.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MeetingMind.Converters"
        xmlns:vm="clr-namespace:MeetingMind.ViewModels"
        mc:Ignorable="d"
        Title="MeetingMind" Height="700" Width="1200">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Top Control Panel -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="10">
            <Button Content="Test UI" Command="{Binding TestCommand}" Margin="0,0,10,0" Background="LightBlue"/>
            <Button Content="Test Chunk" Command="{Binding TestChunkCommand}" Margin="0,0,10,0" Background="LightGreen"/>
            <Button Content="Start Recording" Command="{Binding StartRecordingCommand}" Margin="0,0,10,0"/>
            <Button Content="Stop Recording" Command="{Binding StopRecordingCommand}" Margin="0,0,10,0"/>
            <ProgressBar Width="150" Height="20" IsIndeterminate="True" Visibility="{Binding IsProcessing, Converter={StaticResource BooleanToVisibilityConverter}}"/>
        </StackPanel>
        
        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel: Live Transcript -->
            <StackPanel Grid.Column="0" Margin="10">
                <TextBlock Text="Live Transcript" FontWeight="Bold" FontSize="14"/>
                <TextBox Text="{Binding LiveTranscript}" AcceptsReturn="True" Height="500" 
                         VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                         TextWrapping="Wrap"/>
            </StackPanel>
            
            <!-- Right Panel: Tabbed Interface -->
            <StackPanel Grid.Column="1" Margin="10">
                <!-- Tab Headers -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <Button Content="Summary" Name="SummaryTab" Click="TabButton_Click" 
                            Background="#E3F2FD" BorderBrush="#2196F3" BorderThickness="1" 
                            Margin="0,0,5,0" Padding="10,5"/>
                    <Button Content="Action Items" Name="ActionItemsTab" Click="TabButton_Click" 
                            Background="LightGray" BorderBrush="Gray" BorderThickness="1" 
                            Margin="0,0,5,0" Padding="10,5"/>
                    <Button Content="Follow-ups" Name="FollowUpsTab" Click="TabButton_Click" 
                            Background="LightGray" BorderBrush="Gray" BorderThickness="1" 
                            Margin="0,0,5,0" Padding="10,5"/>
                    <Button Content="Questions" Name="QuestionsTab" Click="TabButton_Click" 
                            Background="LightGray" BorderBrush="Gray" BorderThickness="1" 
                            Margin="0,0,5,0" Padding="10,5"/>
                    <Button Content="Raw Summary" Name="RawSummaryTab" Click="TabButton_Click" 
                            Background="LightGray" BorderBrush="Gray" BorderThickness="1" 
                            Padding="10,5"/>
                </StackPanel>
                
                <!-- Tab Content -->
                <Grid Height="400">
                    <!-- Summary Tab Content -->
                    <ScrollViewer Name="SummaryContent" Visibility="Visible" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="AI Summary" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                            <TextBox Text="{Binding SummaryText}" AcceptsReturn="True" Height="150" 
                                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                                     TextWrapping="Wrap" Margin="0,0,0,20"/>
                            
                            <!-- Live AI Suggestions Section -->
                            <TextBlock Text="Live AI Suggestions" FontWeight="Bold" FontSize="14" Margin="0,0,0,5"/>
                            
                            <!-- Suggested Questions -->
                            <Border Background="#E3F2FD" BorderBrush="#2196F3" BorderThickness="1" CornerRadius="5" Margin="0,0,0,10">
                                <StackPanel Margin="10">
                                    <TextBlock Text="💡 Suggested Questions" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding SuggestedQuestions}" TextWrapping="Wrap" FontSize="11"/>
                                </StackPanel>
                            </Border>
                            
                            <!-- Meeting Insights -->
                            <Border Background="#FFF3E0" BorderBrush="#FF9800" BorderThickness="1" CornerRadius="5">
                                <StackPanel Margin="10">
                                    <TextBlock Text="🔍 Meeting Insights" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding MeetingInsights}" TextWrapping="Wrap" FontSize="11"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Action Items Tab Content -->
                    <ScrollViewer Name="ActionItemsContent" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Action Items" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                            <TextBox Text="{Binding ActionItems}" AcceptsReturn="True" Height="350" 
                                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                                     TextWrapping="Wrap"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Follow-ups Tab Content -->
                    <ScrollViewer Name="FollowUpsContent" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Follow-ups" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                            <TextBox Text="{Binding FollowUps}" AcceptsReturn="True" Height="350" 
                                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                                     TextWrapping="Wrap"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Questions Tab Content -->
                    <ScrollViewer Name="QuestionsContent" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Suggested Questions" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                            <TextBox Text="{Binding SuggestedQuestions}" AcceptsReturn="True" Height="350" 
                                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                                     TextWrapping="Wrap"/>
                        </StackPanel>
                    </ScrollViewer>
                    
                    <!-- Raw Summary Tab Content -->
                    <ScrollViewer Name="RawSummaryContent" Visibility="Collapsed" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Raw Summary" FontWeight="Bold" FontSize="14" Margin="0,0,0,10"/>
                            <TextBox Text="{Binding MainSummary}" AcceptsReturn="True" Height="350" 
                                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                                     TextWrapping="Wrap"/>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </StackPanel>
        </Grid>
        
        <!-- Bottom Control Panel -->
        <StackPanel Orientation="Horizontal" Grid.Row="2" Margin="10">
            <Button Content="Export PDF" Command="{Binding ExportPdfCommand}" Margin="0,0,10,0"/>
            <Button Content="Clear Session" Command="{Binding ClearSessionCommand}"/>
        </StackPanel>
    </Grid>
</Window>
